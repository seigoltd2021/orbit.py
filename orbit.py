import numpy as np
import matplotlib.pyplot as plt

G = 6.67e-11    # гравитационная постоянная
M = 5.97e24     # масса Земли
R = 6.371e6     # радиус Земли

def orbit(h, v):
    """
    Рассчитывает орбиту объекта вокруг Земли
    с заданной высотой h и скоростью v
    """
    # Рассчитываем полную энергию системы
    E = (0.5 * v**2) - (G * M) / (R + h)
    
    # Рассчитываем полуось орбиты
    a = - G * M / (2 * E)
    
    # Рассчитываем период обращения
    T = 2 * np.pi * np.sqrt(a**3 / (G * M))
    
    # Рассчитываем массив времени
    t = np.linspace(0, T, 1000)
    
    # Рассчитываем массив расстояний от центра Земли
    r = a * (1 - np.cos(t * np.sqrt(G * M / a**3)))
    
    # Рассчитываем массив скоростей
    v = np.sqrt(2 * (E + (G * M) / r) )
    
    # Рассчитываем массив углов
    theta = t * (2 * np.pi / T)
    
    # Рассчитываем массив координат в трехмерном пространстве
    x = r * np.cos(theta)
    y = r * np.sin(theta)
    z = np.zeros_like(x)
    
    # Выводим орбиту в виде графика
    fig = plt.figure()
    ax = fig.add_subplot(111, projection='3d')
    ax.plot(x, y, z)
    plt.show()

# Пример использования функции
orbit(400000, 7800)
